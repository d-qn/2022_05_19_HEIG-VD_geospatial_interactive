---
title: "More interactive mapping with R"
author: "Duc-Quang Nguyen"
date: "2022/05/19"
output: 
  revealjs::revealjs_presentation:
    theme: moon
    highlight: espresso
    echo: TRUE
    warning: FALSE
    message: FALSE
---







## Improve the tooltip and export as stanalone HTML

![HTMLtools](https://github.com/rstudio/htmltools/raw/main/man/figures/logo.png)


```{r tooltip, eval = F}
# create more informative HTML tooltip
ln_df <- ln_df %>% 
  mutate(
    tp = str_c("<h3>", mun_name, "<h3>",
               "<i>", canton_name, "</i><br>",
               "<b>",
               prettyNum(jaStimmenInProzent, 
                         decimal.mark = ",", digits = 3),
               "% oui</b>"
               ) %>% str_replace_all("'", "&#39;")
  )

ln_mapi <- ggplot(ln_df) +
  geom_sf_interactive(aes(
    fill = jaStimmenInProzent, 
    tooltip = HTML(tp),
    data_id = mun_id), 
    color = NA) +
  scale_fill_viridis_c(option = "E", limits = c(0, 100)) +
  theme_void() +
  theme(legend.position = "top")

save_html(
  tags$body(
      h1("Super titre pour ma super carte"),
  ggiraph(ggobj = ln_mapi, width = 1),
  ),
  file = "choropleth_lexNetflix_muni.html"
)


```




https://www.rstudio.com/resources/cheatsheets/







